# Phase 3: ç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼ãƒ»ãƒãƒ³ãƒ‰æ¯”ç‡ã«ã‚ˆã‚‹åç›¸åˆ†æ å¼•ãç¶™ããƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

**ä½œæˆæ—¥**: 2025å¹´12æœˆ25æ—¥
**Phase**: 3ï¼ˆç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼å®Ÿé¨“ï¼‰
**å‡ºåŠ›å…ˆ**: `/home/tsu-nera/repo/satoru/issues/008_sazou/relative_power/`

---

## ğŸ“‹ ã“ã‚Œã¾ã§ã®çµŒç·¯

### Phase 1: å˜ä¸€ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ†æï¼ˆ2025-12-24ï¼‰

**ç›®çš„**: åç›¸ï¼ˆIMUï¼‰ã¨è„³æ³¢ãƒ»è„³è¡€æµãƒ»å¿ƒæ‹ã®é–¢ä¿‚ã‚’æ¢ç´¢çš„ã«åˆ†æ

**ä¸»è¦ãªç™ºè¦‹**:
1. **Yaw RMS â‡” HbOï¼ˆè„³è¡€æµï¼‰**: Ï=-0.915*** â†’ **æ¥µã‚ã¦å¼·ã„è² ã®ç›¸é–¢**
2. **Yaw RMS â‡” Betaæ³¢ï¼ˆç·Šå¼µï¼‰**: r=+0.930*** â†’ **æ¥µã‚ã¦å¼·ã„æ­£ã®ç›¸é–¢**
3. **ã‚¸ãƒ£ã‚¤ãƒ­ç³»æŒ‡æ¨™ãŒè„³è¡€æµä½ä¸‹ã®å¼·ã„äºˆæ¸¬å› å­**

**ä½¿ç”¨ã—ãŸæŒ‡æ¨™**:
- EEG: **çµ¶å¯¾ãƒ‘ãƒ¯ãƒ¼ï¼ˆdBå˜ä½ï¼‰** `10Ã—logâ‚â‚€(Î¼VÂ²)`
- fNIRS: Spearmanç›¸é–¢ä¿‚æ•°
- åç›¸: Motion Index, Gyro RMS, Yaw RMS, Pitch, Roll

---

### Phase 2: è¤‡æ•°ã‚»ãƒƒã‚·ãƒ§ãƒ³æ¤œè¨¼ï¼ˆ2025-12-11ï½12-25ã€5ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰

**ç›®çš„**: Phase 1ã®ä»®èª¬ãŒå†ç¾ã™ã‚‹ã‹æ¤œè¨¼

**çµæœ**:

| ä»®èª¬ | Phase 1 | å†ç¾æ€§ | åˆ¤å®š |
|------|---------|--------|------|
| Yaw RMS â‡” HbOï¼ˆè„³è¡€æµï¼‰ | Ï=-0.915*** | **80%** (5ä¸­4) | âœ… **å¼·ãæ”¯æŒ** |
| Gyro RMS â‡” HbOï¼ˆè„³è¡€æµï¼‰ | Ï=-0.79 | **80%** (5ä¸­4) | âœ… **å¼·ãæ”¯æŒ** |
| Yaw RMS â‡” Betaæ³¢ï¼ˆç·Šå¼µï¼‰ | r=+0.930*** | **40%** (5ä¸­2) | â–³ éƒ¨åˆ†çš„ã«æ”¯æŒ |
| Yaw RMS â‡” Deltaæ³¢ | r=+0.850** | **40%** (5ä¸­2) | â–³ éƒ¨åˆ†çš„ã«æ”¯æŒ |
| Yaw RMS â‡” Thetaæ³¢ | r=+0.831** | **40%** (5ä¸­2) | â–³ éƒ¨åˆ†çš„ã«æ”¯æŒ |
| Yaw RMS â‡” Alphaæ³¢ | r=-0.672* | **20%** (5ä¸­1) | âœ— æ£„å´ |

**é‡è¦ãªç™ºè¦‹**:
- âœ… **è„³è¡€æµï¼ˆHbOï¼‰ã¨ã®é–¢ä¿‚ã¯æ¥µã‚ã¦é ‘å¥**ï¼ˆå†ç¾æ€§80%ï¼‰
- âŒ **EEGï¼ˆè„³æ³¢ï¼‰ã¨ã®é–¢ä¿‚ã¯æ—¥ã«ã‚ˆã£ã¦å¤‰å‹•**ï¼ˆå†ç¾æ€§20-40%ï¼‰

**ä»®èª¬**:
EEGçµ¶å¯¾ãƒ‘ãƒ¯ãƒ¼ï¼ˆdBï¼‰ã¯**æ—¥é–“å¤‰å‹•ãƒ»é›»æ¥µæ¥è§¦çŠ¶æ…‹ãƒ»å€‹äººå·®**ã®å½±éŸ¿ã‚’å—ã‘ã‚„ã™ã„å¯èƒ½æ€§

---

## ğŸ¯ Phase 3ã®ç›®çš„

### èª²é¡Œ

**Phase 2ã§æ˜ã‚‰ã‹ã«ãªã£ãŸå•é¡Œ**:
```
ä½“è»¸ã®å‹•ãï¼ˆYaw RMSï¼‰â‡” è„³æ³¢ï¼ˆEEGï¼‰ã®ç›¸é–¢ãŒå†ç¾ã—ãªã„
ã€€ã€€â†“
ãªãœã‹ï¼Ÿ
ã€€ã€€â†“
çµ¶å¯¾ãƒ‘ãƒ¯ãƒ¼ï¼ˆdBï¼‰ã®æ—¥é–“å¤‰å‹•ãŒå¤§ãã„ãŸã‚ï¼Ÿ
```

### æ–°ã—ã„ä»®èª¬

**ç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼ãƒ»ãƒãƒ³ãƒ‰æ¯”ç‡ã‚’ä½¿ãˆã°ã€EEGæŒ‡æ¨™ã®å†ç¾æ€§ãŒå‘ä¸Šã™ã‚‹ã®ã§ã¯ï¼Ÿ**

```
çµ¶å¯¾ãƒ‘ãƒ¯ãƒ¼ï¼ˆdBï¼‰:
  - åˆ©ç‚¹: ç”Ÿç†çš„æ„å‘³ãŒæ˜ç¢º
  - æ¬ ç‚¹: æ—¥é–“å¤‰å‹•å¤§ã€é›»æ¥µå½±éŸ¿å¤§

ç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼ï¼ˆ%ï¼‰:
  - åˆ©ç‚¹: å€‹äººå†…æ¨™æº–åŒ–ã€æ—¥é–“å¤‰å‹•è»½æ¸›
  - æ¬ ç‚¹: çµ¶å¯¾æƒ…å ±ã‚’å¤±ã†

ãƒãƒ³ãƒ‰æ¯”ç‡ï¼ˆÎ¸/Î±ã€Î²/Î±ãªã©ï¼‰:
  - åˆ©ç‚¹: è„³çŠ¶æ…‹ã®æŒ‡æ¨™åŒ–ã€è§£é‡ˆã—ã‚„ã™ã„
  - æ¬ ç‚¹: è¤‡é›‘ãªé–¢ä¿‚æ€§
```

### æ¤œè¨¼ã™ã‚‹æŒ‡æ¨™

#### 1. **ç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼ï¼ˆ%ï¼‰**

```python
# å„ãƒãƒ³ãƒ‰ã®ãƒ‘ãƒ¯ãƒ¼æ¯”ç‡
Delta% = (Delta_power / Total_power) Ã— 100
Theta% = (Theta_power / Total_power) Ã— 100
Alpha% = (Alpha_power / Total_power) Ã— 100
Beta% = (Beta_power / Total_power) Ã— 100
Gamma% = (Gamma_power / Total_power) Ã— 100

# Total_power = Delta + Theta + Alpha + Beta + Gamma
```

#### 2. **ãƒãƒ³ãƒ‰æ¯”ç‡**

```python
Î¸/Î±æ¯”: ç‘æƒ³æ·±åº¦ï¼ˆé«˜ã„ã»ã©æ·±ã„ç‘æƒ³çŠ¶æ…‹ï¼‰
Î²/Î±æ¯”: å¤–çš„æ³¨æ„/å†…çš„æ³¨æ„ã®æ¯”ç‡ï¼ˆé«˜ã„ã»ã©å¿ƒã®æ•£ä¹±ã€ä½ã„ã»ã©å†…çš„æ³¨æ„å„ªä½ï¼‰
Î²/Î¸æ¯”: æ³¨æ„ãƒ»é›†ä¸­åº¦ï¼ˆé«˜ã„ã»ã©å¤–çš„ã‚¿ã‚¹ã‚¯ã¸ã®é›†ä¸­ï¼‰
Î´/Î²æ¯”: ç¡çœ å‚¾å‘
Î³/Î¸æ¯”: èªçŸ¥è² è·
```

---

## ğŸ”¬ æ¨å¥¨ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

### ã‚¹ãƒ†ãƒƒãƒ—1: **å˜ä¸€ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ã®æ¢ç´¢**ï¼ˆæ¨å¥¨ï¼‰

**ç†ç”±**:
1. æ‰‹æ³•ã®åŠ¹æœã‚’ç´ æ—©ãç¢ºèªã§ãã‚‹
2. ãƒ‡ãƒãƒƒã‚°ãƒ»èª¿æ•´ãŒã—ã‚„ã™ã„
3. Phase 1ã¨åŒã˜ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§æ¯”è¼ƒå¯èƒ½

**æ¨å¥¨ã‚»ãƒƒã‚·ãƒ§ãƒ³**:
- `2025-12-24`ï¼ˆPhase 1ã¨åŒã˜ï¼‰ â†’ ç›´æ¥æ¯”è¼ƒå¯èƒ½
- ã¾ãŸã¯ `2025-12-25`ï¼ˆæœ€æ–°ï¼‰

**åˆ†æé …ç›®**:
```
åç›¸æŒ‡æ¨™:
  - Yaw RMSï¼ˆå·¦å³å›è»¢ï¼‰
  - Gyro RMSï¼ˆç·åˆå›è»¢ï¼‰
  - Motion Indexï¼ˆå‹•ãï¼‰
  - Pitch, Roll

EEGæŒ‡æ¨™ï¼ˆæ–°è¦ï¼‰:
  1. ç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼ï¼ˆ%ï¼‰
     - Delta%, Theta%, Alpha%, Beta%, Gamma%

  2. ãƒãƒ³ãƒ‰æ¯”ç‡
     - Î¸/Î±æ¯”ã€Î²/Î±æ¯”ã€Î²/Î¸æ¯”
     - Î´/Î²æ¯”ã€Î³/Î¸æ¯”

ç›¸é–¢åˆ†æ:
  - Pearsonç›¸é–¢ä¿‚æ•°
  - Spearmané †ä½ç›¸é–¢ä¿‚æ•°ï¼ˆæ¯”è¼ƒç”¨ï¼‰
```

**æˆåŠŸã®åˆ¤å®šåŸºæº–**:
```
âœ… ç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼ãƒ»æ¯”ç‡ã§Phase 1ã¨åŒç­‰ä»¥ä¸Šã®ç›¸é–¢ãŒè¦‹ã‚‰ã‚Œã‚‹
  â†’ ã‚¹ãƒ†ãƒƒãƒ—2ã¸é€²ã‚€

âŒ æ”¹å–„ãŒè¦‹ã‚‰ã‚Œãªã„
  â†’ ä»–ã®æ‰‹æ³•ã‚’æ¤œè¨ï¼ˆZ-scoreæ­£è¦åŒ–ã€æ™‚ç³»åˆ—åˆ†æãªã©ï¼‰
```

---

### ã‚¹ãƒ†ãƒƒãƒ—2: **è¤‡æ•°ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§ã®æ¤œè¨¼**ï¼ˆã‚¹ãƒ†ãƒƒãƒ—1ãŒæˆåŠŸã—ãŸå ´åˆï¼‰

**å¯¾è±¡**: Phase 2ã¨åŒã˜5ã‚»ãƒƒã‚·ãƒ§ãƒ³
```
2025-12-11
2025-12-19
2025-12-22
2025-12-24
2025-12-25
```

**æ¤œè¨¼é …ç›®**:
- ç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼ãƒ»æ¯”ç‡ã§ã®å†ç¾æ€§
- çµ¶å¯¾ãƒ‘ãƒ¯ãƒ¼ã¨ã®æ¯”è¼ƒ
- ãƒ¡ã‚¿åˆ†æï¼ˆç›¸é–¢ä¿‚æ•°ã®å¹³å‡ãƒ»ä¿¡é ¼åŒºé–“ï¼‰

**æœŸå¾…ã•ã‚Œã‚‹æˆæœ**:
```
ç›®æ¨™: EEGæŒ‡æ¨™ã®å†ç¾æ€§ã‚’40% â†’ 60-80%ã«å‘ä¸Š
```

---

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆï¼ˆæ¨å¥¨ï¼‰

### Phase 3: å˜ä¸€ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆã‚¹ãƒ†ãƒƒãƒ—1ï¼‰

```
issues/008_sazou/relative_power/
â”œâ”€â”€ HANDOFF.md                    # ã“ã®å¼•ãç¶™ããƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”œâ”€â”€ single_session/               # ã‚¹ãƒ†ãƒƒãƒ—1: å˜ä¸€ã‚»ãƒƒã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ analyze_relative_power.py # è§£æã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ correlation_results.csv   # ç›¸é–¢åˆ†æçµæœ
â”‚   â”œâ”€â”€ combined_data.csv         # çµ±åˆãƒ‡ãƒ¼ã‚¿
â”‚   â””â”€â”€ REPORT.md                 # ãƒ¬ãƒãƒ¼ãƒˆ
â””â”€â”€ multi_sessions/               # ã‚¹ãƒ†ãƒƒãƒ—2: è¤‡æ•°ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆæˆåŠŸå¾Œï¼‰
    â”œâ”€â”€ batch_analyze.py
    â”œâ”€â”€ cross_session_stats.py
    â””â”€â”€ REPORT.md
```

---

## ğŸ”§ æŠ€è¡“çš„è©³ç´°

### ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

#### 1. **MNE Rawãƒ‡ãƒ¼ã‚¿æº–å‚™**

```python
from lib import prepare_mne_raw, load_mind_monitor_csv

df = load_mind_monitor_csv(csv_path)
raw_data = prepare_mne_raw(df)
raw = raw_data['raw']
```

#### 2. **Statistical DataFrameç”Ÿæˆ**

```python
from lib.statistical_dataframe import create_statistical_dataframe

stat_df = create_statistical_dataframe(
    raw=raw,
    segment_minutes=3,
    warmup_minutes=0.0,
    session_start=df['TimeStamp'].iloc[0],
    df=df,  # IMUçµ±è¨ˆé‡ç”¨
)
```

**Statistical DFã«å«ã¾ã‚Œã‚‹ã‚‚ã®**:
```python
stat_df = {
    'band_powers': DataFrame,      # çµ¶å¯¾ãƒ‘ãƒ¯ãƒ¼ï¼ˆdBï¼‰
    'band_ratios': DataFrame,      # ãƒãƒ³ãƒ‰æ¯”ç‡ï¼ˆå®Ÿæ•°ãƒ»dBï¼‰
    'spectral_entropy': DataFrame, # Spectral Entropy
    'iaf': Series,                 # IAFæ™‚ç³»åˆ—
    'posture': DataFrame,          # åç›¸çµ±è¨ˆé‡
    'statistics': DataFrame        # çµ±è¨ˆã‚µãƒãƒªãƒ¼
}
```

#### 3. **ç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼ã®è¨ˆç®—**

Statistical DFã«ã¯**ç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼ãŒå«ã¾ã‚Œã¦ã„ãªã„**ãŸã‚ã€æ‰‹å‹•è¨ˆç®—ãŒå¿…è¦ï¼š

```python
import numpy as np

# çµ¶å¯¾ãƒ‘ãƒ¯ãƒ¼ï¼ˆdBï¼‰ã‚’å–å¾—
band_powers_df = stat_df['band_powers']

# dB â†’ ç·šå½¢ãƒ‘ãƒ¯ãƒ¼ã«å¤‰æ›
delta_power = 10 ** (band_powers_df['Delta'] / 10)
theta_power = 10 ** (band_powers_df['Theta'] / 10)
alpha_power = 10 ** (band_powers_df['Alpha'] / 10)
beta_power = 10 ** (band_powers_df['Beta'] / 10)
gamma_power = 10 ** (band_powers_df['Gamma'] / 10)

# ç·ãƒ‘ãƒ¯ãƒ¼
total_power = delta_power + theta_power + alpha_power + beta_power + gamma_power

# ç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼ï¼ˆ%ï¼‰
delta_relative = (delta_power / total_power) * 100
theta_relative = (theta_power / total_power) * 100
alpha_relative = (alpha_power / total_power) * 100
beta_relative = (beta_power / total_power) * 100
gamma_relative = (gamma_power / total_power) * 100

# DataFrameã«è¿½åŠ 
relative_powers = pd.DataFrame({
    'Delta%': delta_relative,
    'Theta%': theta_relative,
    'Alpha%': alpha_relative,
    'Beta%': beta_relative,
    'Gamma%': gamma_relative,
}, index=band_powers_df.index)
```

#### 4. **ãƒãƒ³ãƒ‰æ¯”ç‡ã®å–å¾—**

Statistical DFã«ã¯æ—¢ã«å«ã¾ã‚Œã¦ã„ã‚‹ï¼š

```python
band_ratios_df = stat_df['band_ratios']

# å®Ÿæ•°æ¯”ç‡
theta_alpha_ratio = band_ratios_df['theta_alpha']     # Î¸/Î±
beta_alpha_ratio = band_ratios_df['beta_alpha']       # Î²/Î±
beta_theta_ratio = band_ratios_df['beta_theta']       # Î²/Î¸
delta_beta_ratio = band_ratios_df['delta_beta']       # Î´/Î²
gamma_theta_ratio = band_ratios_df['gamma_theta']     # Î³/Î¸
low_high_ratio = band_ratios_df['low_high']           # ä½å‘¨æ³¢/é«˜å‘¨æ³¢

# dBå˜ä½ï¼ˆå¯¾æ•°ç©ºé–“ã§ã®æ¯”ç‡ï¼‰
theta_alpha_db = band_ratios_df['theta_alpha_db']
beta_alpha_db = band_ratios_df['beta_alpha_db']
# ...
```

#### 5. **åç›¸çµ±è¨ˆé‡ã®å–å¾—**

```python
posture_df = stat_df['posture']

# ä¸»è¦ãªåç›¸æŒ‡æ¨™
yaw_rms = posture_df['yaw_rms']                       # å·¦å³å›è»¢
gyro_rms = posture_df['gyro_rms']                     # ç·åˆå›è»¢
motion_index_mean = posture_df['motion_index_mean']   # å¹³å‡å‹•ã
pitch_angle = posture_df['pitch_angle']               # å‰å¾Œå‚¾ã
roll_angle = posture_df['roll_angle']                 # å·¦å³å‚¾ã
```

#### 6. **ç›¸é–¢åˆ†æ**

```python
from scipy import stats

# åç›¸æŒ‡æ¨™ã¨EEGç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼ã®ç›¸é–¢
for posture_var in ['yaw_rms', 'gyro_rms', 'motion_index_mean']:
    for eeg_var in ['Delta%', 'Theta%', 'Alpha%', 'Beta%', 'Gamma%']:
        # æ¬ æå€¤ã‚’é™¤å¤–
        mask = combined_df[[posture_var, eeg_var]].notna().all(axis=1)
        data_clean = combined_df[mask]

        if len(data_clean) < 3:
            continue

        # Pearsonç›¸é–¢
        r, p = stats.pearsonr(data_clean[posture_var], data_clean[eeg_var])

        # çµæœã‚’è¨˜éŒ²
        # ...
```

---

## ğŸ“Š æ¯”è¼ƒåˆ†æã®è¦³ç‚¹

### Phase 1ï¼ˆçµ¶å¯¾ãƒ‘ãƒ¯ãƒ¼ï¼‰vs Phase 3ï¼ˆç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼ãƒ»æ¯”ç‡ï¼‰

| æŒ‡æ¨™ã‚¿ã‚¤ãƒ— | Phase 1 | Phase 3ï¼ˆæ–°è¦ï¼‰ |
|----------|---------|----------------|
| **çµ¶å¯¾ãƒ‘ãƒ¯ãƒ¼ï¼ˆdBï¼‰** | âœ“ | âœ“ï¼ˆæ¯”è¼ƒç”¨ã«ç¶™ç¶šï¼‰ |
| **ç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼ï¼ˆ%ï¼‰** | âœ— | âœ“ï¼ˆæ–°è¦è¿½åŠ ï¼‰ |
| **ãƒãƒ³ãƒ‰æ¯”ç‡** | âœ— | âœ“ï¼ˆæ–°è¦è¿½åŠ ï¼‰ |

### è©•ä¾¡æŒ‡æ¨™

å„æ‰‹æ³•ã§ã®**ç›¸é–¢ã®å¼·ã•**ã‚’æ¯”è¼ƒï¼š

```
1. çµ¶å¯¾ãƒ‘ãƒ¯ãƒ¼ï¼ˆdBï¼‰ã¨ã®ç›¸é–¢
   Yaw RMS â‡” Beta (dB): r=+0.930***ï¼ˆPhase 1ï¼‰

2. ç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼ï¼ˆ%ï¼‰ã¨ã®ç›¸é–¢
   Yaw RMS â‡” Beta%: r=?ï¼ˆPhase 3ã§æ¤œè¨¼ï¼‰

3. ãƒãƒ³ãƒ‰æ¯”ç‡ã¨ã®ç›¸é–¢
   Yaw RMS â‡” Î²/Î±æ¯”: r=?ï¼ˆPhase 3ã§æ¤œè¨¼ï¼‰

æ¯”è¼ƒ:
  - ç›¸é–¢ä¿‚æ•°ã®å¤§ãã•
  - på€¤
  - è§£é‡ˆã®ã—ã‚„ã™ã•
```

---

## ğŸ“ æœŸå¾…ã•ã‚Œã‚‹æˆæœ

### çŸ­æœŸçš„ï¼ˆã‚¹ãƒ†ãƒƒãƒ—1: å˜ä¸€ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰

1. **æ‰‹æ³•ã®æœ‰åŠ¹æ€§ç¢ºèª**
   - ç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼ãƒ»æ¯”ç‡ãŒçµ¶å¯¾ãƒ‘ãƒ¯ãƒ¼ã‚ˆã‚Šæœ‰åŠ¹ã‹ï¼Ÿ
   - ã©ã®æŒ‡æ¨™ãŒæœ€ã‚‚åç›¸ã¨ç›¸é–¢ã™ã‚‹ã‹ï¼Ÿ

2. **æœ€é©ãªæŒ‡æ¨™ã®ç‰¹å®š**
   ```
   å€™è£œ:
     - Beta%ï¼ˆç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼ï¼‰
     - Î²/Î±æ¯”ï¼ˆå¿ƒã®æ•£ä¹±ï¼‰
     - Î¸/Î±æ¯”ï¼ˆç‘æƒ³æ·±åº¦ï¼‰
   ```

3. **Phase 1ã¨ã®æ¯”è¼ƒ**
   - åŒã˜ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆ2025-12-24ï¼‰ã§ã®æ¯”è¼ƒ
   - æ‰‹æ³•ã«ã‚ˆã‚‹é•ã„ã‚’å®šé‡åŒ–

### é•·æœŸçš„ï¼ˆã‚¹ãƒ†ãƒƒãƒ—2: è¤‡æ•°ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰

1. **å†ç¾æ€§ã®å‘ä¸Š**
   - ç›®æ¨™: EEGæŒ‡æ¨™ã®å†ç¾æ€§ã‚’40% â†’ 60-80%ã«å‘ä¸Š
   - çµ¶å¯¾ãƒ‘ãƒ¯ãƒ¼ã¨ã®æ¯”è¼ƒ

2. **é ‘å¥ãªæŒ‡æ¨™ã®ç¢ºç«‹**
   ```
   fNIRS: Yaw RMS â‡” HbOï¼ˆå†ç¾æ€§80%ï¼‰â† æ—¢ã«ç¢ºç«‹
   EEG: Yaw RMS â‡” [æœ€é©ãªæŒ‡æ¨™]ï¼ˆå†ç¾æ€§60-80%ï¼‰â† Phase 3ã§ç¢ºç«‹
   ```

3. **åç¦…å®Ÿè·µã¸ã®å¿œç”¨**
   - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ç”¨ã®æŒ‡æ¨™
   - ç†Ÿç·´åº¦è©•ä¾¡ã®å®¢è¦³çš„æŒ‡æ¨™

---

## âš ï¸ æ³¨æ„äº‹é …

### 1. **fNIRSã¨å¿ƒæ‹æ•°ã¯é™¤å¤–**

Phase 3ã§ã¯**è„³æ³¢ã¨åç›¸ã®é–¢ä¿‚ã®ã¿**ã«ç„¦ç‚¹ã‚’å½“ã¦ã¾ã™ï¼š

```python
# fNIRSãƒ»å¿ƒæ‹æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯Noneã«è¨­å®š
stat_df = create_statistical_dataframe(
    raw=raw,
    segment_minutes=3,
    warmup_minutes=0.0,
    session_start=df['TimeStamp'].iloc[0],
    fnirs_results=None,      # fNIRSé™¤å¤–
    hr_data=None,            # å¿ƒæ‹æ•°é™¤å¤–
    df=df,                   # åç›¸ã®ã¿
)
```

**ç†ç”±**:
- fNIRSã¨ã®é–¢ä¿‚ã¯æ—¢ã«ååˆ†è§£æ˜ï¼ˆå†ç¾æ€§80%ï¼‰
- ç„¦ç‚¹ã‚’çµã‚‹ã“ã¨ã§åˆ†æã‚’åŠ¹ç‡åŒ–
- EEGã®å•é¡Œè§£æ±ºã«é›†ä¸­

### 2. **ã‚»ã‚°ãƒ¡ãƒ³ãƒˆé•·**

Phase 1/2ã¨åŒã˜ã**3åˆ†ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ**ã‚’ä½¿ç”¨ï¼š
- çµ±è¨ˆçš„ã«ååˆ†ãªãƒ‡ãƒ¼ã‚¿æ•°
- åç›¸ã®å¾®ç´°ãªå¤‰åŒ–ã‚’æ‰ãˆã‚‹

### 3. **ã‚¦ã‚©ãƒ¼ãƒ ã‚¢ãƒƒãƒ—**

`warmup_minutes=0.0`ï¼ˆPhase 1/2ã¨åŒã˜ï¼‰ï¼š
- å…¨ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
- ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹ç›´å¾Œã®ãƒ‡ãƒ¼ã‚¿ã‚‚å«ã‚€

---

## ğŸ“š å‚è€ƒè³‡æ–™

### Phase 1/2ã®ãƒ¬ãƒãƒ¼ãƒˆ

- **Phase 1**: `issues/008_sazou/2025-12-24_single_session/REPORT.md`
- **Phase 2**: `issues/008_sazou/multi_sessions/REPORT.md`
- **å¼•ãç¶™ã**: `issues/008_sazou/HANDOFF.md`

### ã‚³ãƒ¼ãƒ‰å‚ç…§

- **Statistical DataFrame**: `lib/statistical_dataframe.py`
- **ç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼è¨ˆç®—ä¾‹**: `lib/segment_analysis.py` (lines 241-264)
- **ãƒãƒ³ãƒ‰æ¯”ç‡è¨ˆç®—**: `lib/statistical_dataframe.py` (lines 211-243)
- **Phase 1è§£æã‚¹ã‚¯ãƒªãƒ—ãƒˆ**: `issues/008_sazou/2025-12-24_single_session/analyze_posture.py`

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³**: `docs/AI-CODING.md`
- **Mind Monitor CSVä»•æ§˜**: `docs/MIND_MONITOR_CSV_SPECIFICATION.md`
- **IMUã‚»ãƒ³ã‚µãƒ¼è¨­è¨ˆ**: `docs/IMU_SENSOR_DESIGN.md`

---

## ğŸš€ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### `/clear` å¾Œã®å®Ÿè¡Œæ‰‹é †

1. **ã‚¹ãƒ†ãƒƒãƒ—1ã‚’é–‹å§‹**:
   ```
   å˜ä¸€ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆ2025-12-24ï¼‰ã§ç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼ãƒ»ãƒãƒ³ãƒ‰æ¯”ç‡ã‚’åˆ†æ
   ```

2. **ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆ**:
   ```
   issues/008_sazou/relative_power/single_session/analyze_relative_power.py
   ```

3. **ç›¸é–¢åˆ†æã‚’å®Ÿè¡Œ**:
   ```
   åç›¸æŒ‡æ¨™ â‡” ç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼ï¼ˆ%ï¼‰
   åç›¸æŒ‡æ¨™ â‡” ãƒãƒ³ãƒ‰æ¯”ç‡
   ```

4. **Phase 1ã¨æ¯”è¼ƒ**:
   ```
   çµ¶å¯¾ãƒ‘ãƒ¯ãƒ¼ vs ç›¸å¯¾ãƒ‘ãƒ¯ãƒ¼ vs ãƒãƒ³ãƒ‰æ¯”ç‡
   ã©ã‚ŒãŒæœ€ã‚‚æœ‰åŠ¹ã‹ï¼Ÿ
   ```

5. **æˆåŠŸã—ãŸå ´åˆ**:
   ```
   ã‚¹ãƒ†ãƒƒãƒ—2ï¼ˆè¤‡æ•°ã‚»ãƒƒã‚·ãƒ§ãƒ³æ¤œè¨¼ï¼‰ã¸é€²ã‚€
   ```

---

**é€£çµ¡å…ˆ**: ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«è³ªå•ãŒã‚ã‚Œã°ã€Claudeã«èã„ã¦ãã ã•ã„ ğŸ˜Š

**Good luck with Phase 3!** ğŸ‰

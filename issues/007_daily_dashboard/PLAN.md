# Session Log - Google Spreadsheet é€£æºè¨­è¨ˆ

## æ¦‚è¦

æ¯æ—¥ã®ç‘æƒ³ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‹ã‚‰ä¸»è¦æŒ‡æ¨™ã‚’æŠ½å‡ºã—ã€æ™‚ç³»åˆ—ã§ãƒ­ã‚°è¨˜éŒ²ãƒ»ç®¡ç†ã™ã‚‹ã€‚
ç¾åœ¨ã¯ãƒ­ãƒ¼ã‚«ãƒ«CSVï¼ˆ`session_log.csv`ï¼‰ã«è¨˜éŒ²ã—ã€å°†æ¥çš„ã«Google Spreadsheetã¸åŒæœŸã™ã‚‹ã€‚

## ã‚«ãƒ©ãƒ è¨­è¨ˆï¼ˆ12é …ç›®ï¼‰

### ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿

| ã‚«ãƒ©ãƒ å | èª¬æ˜ | ä¾‹ |
|----------|------|-----|
| `date` | æ—¥ä»˜ | 2025-11-19 |
| `duration_min` | è¨ˆæ¸¬æ™‚é–“ï¼ˆåˆ†ï¼‰ | 18.9 |

### ä¸»è¦æŒ‡æ¨™

å„æŒ‡æ¨™ã«ã¤ã„ã¦ `mean`ï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³å¹³å‡ï¼‰ã¨ `best`ï¼ˆã‚»ã‚°ãƒ¡ãƒ³ãƒˆæœ€è‰¯å€¤ï¼‰ã‚’è¨˜éŒ²ã™ã‚‹ã€‚

| ã‚«ãƒ©ãƒ å | èª¬æ˜ | å˜ä½ |
|----------|------|------|
| `fm_theta_mean` | FmÎ¸å¹³å‡ | dB |
| `fm_theta_best` | FmÎ¸æœ€è‰¯å€¤ | dB |
| `iaf_mean` | IAFå¹³å‡ | Hz |
| `iaf_best` | IAFæœ€è‰¯å€¤ | Hz |
| `alpha_mean` | Alphaå¹³å‡ | dB |
| `alpha_best` | Alphaæœ€è‰¯å€¤ | dB |
| `beta_mean` | Betaå¹³å‡ | dB |
| `beta_best` | Betaæœ€è‰¯å€¤ | dB |
| `theta_alpha_mean` | Î¸/Î±æ¯”å¹³å‡ | ratio |
| `theta_alpha_best` | Î¸/Î±æ¯”æœ€è‰¯å€¤ | ratio |

## ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹

### meanå€¤ã®å–å¾—å…ƒ

`scripts/generate_report.py` ã® `run_full_analysis()` ã§è¨ˆç®—ã•ã‚ŒãŸ `results['mean_metrics']`ï¼š

```python
mean_metrics = {
    'fm_theta_mean': segments['fmtheta_mean'].mean(),
    'iaf_mean': segments['iaf_mean'].mean(),
    'alpha_mean': segments['alpha_mean'].mean(),
    'beta_mean': segments['beta_mean'].mean(),
    'theta_alpha_mean': segments['theta_alpha_ratio'].mean(),
}
```

å„ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã®å¹³å‡å€¤ã‚’å…¨ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã§å¹³å‡ã—ãŸã‚»ãƒƒã‚·ãƒ§ãƒ³å…¨ä½“ã®ä»£è¡¨å€¤ã€‚

### bestå€¤ã®å–å¾—å…ƒ

`lib/segment_analysis.py:487-525` ã® `calculate_best_metrics()` ã§è¨ˆç®—ã•ã‚ŒãŸ `results['best_metrics']`ï¼š

ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåˆ¥ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰**é›†ä¸­ç‘æƒ³**ã«æœ€é©ãªå€¤ã‚’é¸å®šï¼š

| ã‚«ãƒ©ãƒ å | é¸å®šåŸºæº– | ç†ç”± |
|----------|----------|------|
| `fm_theta_best` | æœ€å¤§å€¤ | FmÎ¸ãŒé«˜ã„ã»ã©ç‘æƒ³æ·±åº¦ãŒæ·±ã„ |
| `iaf_best` | æœ€å¤§å€¤ | IAFãŒé«˜ã„ã»ã©å®‰å®šã—ãŸã‚¢ãƒ«ãƒ•ã‚¡æ³¢ |
| `alpha_best` | æœ€å¤§å€¤ | AlphaãŒé«˜ã„ã»ã©ãƒªãƒ©ãƒƒã‚¯ã‚¹çŠ¶æ…‹ |
| `beta_best` | æœ€å°å€¤ | BetaãŒä½ã„ã»ã©è¦šé†’/ã‚¹ãƒˆãƒ¬ã‚¹ãŒä½ã„ |
| `theta_alpha_best` | æœ€å¤§å€¤ | Î¸/Î±æ¯”ãŒé«˜ã„ã»ã©ç‘æƒ³æ·±åº¦ãŒæ·±ã„ |

## å®Ÿè£…çŠ¶æ³

### âœ… Phase 1: ãƒ­ãƒ¼ã‚«ãƒ«CSVãƒ­ã‚°æ©Ÿèƒ½ï¼ˆå®Œäº†ï¼‰

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«:**
- `lib/session_log.py` - ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ­ã‚°CSVç®¡ç†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
  - `log_session_metrics()` - ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’CSVã«è¿½è¨˜
- `scripts/generate_report.py` - ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆæ™‚ã«è‡ªå‹•çš„ã«ãƒ­ã‚°ã‚’è¨˜éŒ²

**å‡ºåŠ›å…ˆ:**
- `issues/007_daily_dashboard/session_log.csv`

**å‹•ä½œ:**
1. `scripts/generate_report.py` å®Ÿè¡Œæ™‚ã«åˆ†æçµæœã‹ã‚‰ä¸»è¦æŒ‡æ¨™ã‚’æŠ½å‡º
2. `log_session_metrics()` ãŒã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’CSVã«è¿½è¨˜
3. CSVå­˜åœ¨æ™‚ã¯è¿½è¨˜ã€æ–°è¦ã®å ´åˆã¯ãƒ˜ãƒƒãƒ€ãƒ¼ä»˜ãã§ä½œæˆ

**ä½¿ç”¨ä¾‹:**
```bash
python scripts/generate_report.py --data data/mindMonitor_*.csv --output tmp
# â†’ issues/007_daily_dashboard/session_log.csv ã«è‡ªå‹•è¿½è¨˜
```

### ğŸ”² Phase 2: Google Sheets APIé€£æºï¼ˆæœªå®Ÿè£…ï¼‰

**è¨ˆç”»:**
- Google Sheets APIèªè¨¼è¨­å®š
- CSVãƒ‡ãƒ¼ã‚¿ã‚’ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«åŒæœŸã™ã‚‹é–¢æ•°
- æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã®é‡è¤‡ãƒã‚§ãƒƒã‚¯ï¼ˆæ—¥ä»˜ãƒ™ãƒ¼ã‚¹ï¼‰
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆAPIåˆ¶é™ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ç­‰ï¼‰

**æ¤œè¨äº‹é …:**
- èªè¨¼æ–¹æ³•: ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ vs OAuth 2.0
- åŒæœŸã‚¿ã‚¤ãƒŸãƒ³ã‚°: ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆæ™‚ or ãƒãƒƒãƒå‡¦ç†
- ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§: CSVã‚’ã‚½ãƒ¼ã‚¹ã‚ªãƒ–ãƒˆã‚¥ãƒ«ãƒ¼ã‚¹ã¨ã™ã‚‹ã‹

### ğŸ”² Phase 3: è‡ªå‹•åŒ–ï¼ˆæœªå®Ÿè£…ï¼‰

**è¨ˆç”»:**
- cron/systemd timer ã«ã‚ˆã‚‹å®šæœŸå®Ÿè¡Œ
- æ–°ã—ã„Mind Monitorãƒ‡ãƒ¼ã‚¿CSVã®è‡ªå‹•æ¤œå‡º
- ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ â†’ ãƒ­ã‚°è¨˜éŒ² â†’ (Google SheetsåŒæœŸ) ã®è‡ªå‹•åŒ–

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

- [x] ãƒ¬ãƒãƒ¼ãƒˆã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã™ã‚‹æ©Ÿèƒ½ (`lib/session_log.py`)
- [x] ãƒ­ãƒ¼ã‚«ãƒ«CSVã¸ã®è¨˜éŒ²æ©Ÿèƒ½
- [ ] Google Sheets APIèªè¨¼è¨­å®š
- [ ] Google Sheetsã¸ã®åŒæœŸæ©Ÿèƒ½å®Ÿè£…
- [ ] è‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ
